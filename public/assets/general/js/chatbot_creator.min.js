class ChatbotCreator{constructor(e,t){this.apiBaseUrl=e,this.chatbotId=t,this.modalLoading=new Modal_loading,this.modalRealize=new ModalRealize("chatbotModalRealize"),this.modalConfirm=new ModalConfirm("chatbotModalConfirm"),this.mainCanvas=this.getView("mainCanvas"),this.verticalLineTemplate=this.getView("VerticalLineTemplate"),this.horizantalLineTemplate=this.getView("HorizantalLineTemplate"),this.addNewStepTemplate=this.getView("AddNewStepTemplate"),this.horizontalContainerTemplate=this.getView("HorizontalContainerTemplate"),this.moveBotResponseTemplate=this.getView("MoveBotStepTemplate"),this.editBotResponseTemplate=this.getView("EditBotResponseTemplate"),this.editBotResponseRandomTextItemTemplate=this.getView("EditBotResponseRandomTextItemTemplate"),this.editUserInputTemplate=this.getView("EditUserInputTemplate"),this.editFilterTemplate=this.getView("EditFilterTemplate"),this.editBotActionTemplate=this.getView("EditBotActionTemplate"),this.botStepTemplate=this.getView("BotStepTemplate"),this.refreshChatbotStepsTree(),this.setupMouseScroller()}getView(e){if(is_ElementExist(e))return document.getElementById(e);alert("No template found with this ID: "+e)}getServerConnection(e){this.modalLoading.show();var t=new ServerConnection(this.apiBaseUrl);return t.setSubUrl("chatbots/creator/"+e),t.setMethod("POST"),t.appendHeader("locale",locale),t.appendData("chatbot_id",this.chatbotId),t.setOnFailed(function(e,t,a){var l=JSON.parse(e.responseText);if(this.modalRealize.setHeader(trans("result.failed")),"string"==typeof l.message)this.modalRealize.setBody(l.message);else{var i="";try{l.message.forEach((e=>{i+="* "+e+"\n"}))}catch(e){i=JSON.stringify(l.message,null,2)}this.modalRealize.setBody(i)}this.modalLoading.close(),this.modalRealize.create()}.bind(this)),t}stepTypeDisplay(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(e,t){return 0===t?e:e=" "+e}))}setChatbotStepsTree(e){this.chatbotStepsTree=JSON.parse(e)}setupMouseScroller(){var e=document.getElementById("diagramContainer");let t,a,l,i,n=!1;e.addEventListener("mousedown",(function(s){n=!0,t=s.pageX-e.offsetLeft,a=s.pageY-e.offsetTop,l=e.scrollLeft,i=e.scrollTop,e.style.cursor="grabbing"}),!1),e.addEventListener("mouseup",(function(t){n=!1,e.style.cursor="grab"}),!1),e.addEventListener("mouseleave",(function(t){n=!1,e.style.cursor="grab"}),!1),e.addEventListener("mousemove",(function(s){if(!n)return;e.style.cursor="grabbing",s.preventDefault();const o=s.pageX-e.offsetLeft,p=s.pageY-e.offsetTop,r=1*(o-t),d=1*(p-a);e.scrollLeft=l-r,e.scrollTop=i-d}),!1)}refreshChatbotStepsTree(){var e=this.getServerConnection("get_steps_tree");e.setOnSuccess(function(e){var t=(e=JSON.parse(e)).data;this.setChatbotStepsTree(t.chatbotStepsTree),this.createChatbotDiagram(),this.modalLoading.close()}.bind(this)),e.connect()}addNewStep(e,t){var a=this.getServerConnection("add_new_step");a.appendData("type",e),a.appendData("parent_id",t),a.setOnSuccess(function(e){var t=(e=JSON.parse(e)).data;this.setChatbotStepsTree(t.chatbotStepsTree),this.createChatbotDiagram(),this.modalLoading.close()}.bind(this)),a.connect()}clearCanvas(){this.mainCanvas.innerHTML=""}addTemplateToView(e,t,a,l){var i=this.modifyTempalte(t,a,l);if(null==a)e.innerHTML+=i;else{var n="<div id='"+a+"'>";n+=i,n+="</div>",e.innerHTML+=n}if("EditBotResponseTemplate"==t.id){var s=document.getElementById("StepResponseType_"+l.id);this.setDropdownSelectedItem(s.id,l.action.Type),this.toggleBotResponseForm(s,l.id),this.setDynamicDataToEditBotResponse("",l,!0)}else if("EditUserInputTemplate"==t.id){var o=document.getElementById("StepUserInputType_"+l.id);this.setDropdownSelectedItem(o.id,l.action.Type),this.toggleBotUserInputForm(o,l.id),this.setDynamicDataToEditUserInput("",l,!0)}else if("EditFilterTemplate"==t.id){var p=document.getElementById("StepFilterType_"+l.id);this.setDropdownSelectedItem(p.id,l.action.Type),this.toggleBotFilterForm(p,l.id),this.setDynamicDataToEditFilter("",l,!0)}else if("EditBotActionTemplate"==t.id){p=document.getElementById("StepFilterType_"+l.id);this.setDropdownSelectedItem(p.id,l.action.Type),this.toggleBotActionForm(p,l.id),this.setDynamicDataToEditBotAction("",l,!0)}}modifyTempalte(e,t,a){null==t&&(t=Date.now());var l=e.innerHTML;if("AddNewStepTemplate"==e.id){l=(l=l.replaceAll("AddNewStepTemplate_dropdownMenuButton",t+"_dropdownMenuButton")).replaceAll("AddNewStepTemplate_ParentID",a.parentId)}else if("HorizontalContainerTemplate"==e.id){l=l.replaceAll("HorizontalContainerCanvas",t+"_canvas")}else if("HorizantalLineTemplate"==e.id){var i="100%";(a.isFirstStep||a.isLastStep)&&(i=a.isFirstStep?"calc(50% + 0.25rem + 1px)":"calc(50% - 0.25rem + 1px)"),l=(l=l.replaceAll("HorizantalLineTemplate_Direction",a.isFirstStep?"flex-end":"flex-start")).replaceAll("HorizantalLineTemplate_Width",i)}else if("BotStepTemplate"==e.id){var n="ChatbotStepTemplate_StepID",s="ChatbotStepTemplate_TranslatedTypeName";l=(l=(l=(l=l.replaceAll(n,a.id)).replaceAll(s,a.translated_step_type)).replaceAll("ChatbotStepTemplate_Name",null==a.name?"UNTITLED":a.name)).replaceAll("BotStepTemplate_Show_DeleteWithChilds",a.childs.length>0?"":"d-none")}else if("MoveBotStepTemplate"==e.id){n="ChatbotStep_Id",s="ChatbotStep_TranslatedTypeName";var o="StepTitleValue";l=(l=(l=l.replaceAll(n,a.id)).replaceAll(s,a.translated_step_type)).replaceAll(o,null==a.name?"":a.name)}else if("EditBotResponseTemplate"==e.id){var p=a.action;n="ChatbotStep_Id",s="ChatbotStep_TranslatedTypeName",o="StepTitleValue";l=(l=(l=(l=l.replaceAll(n,a.id)).replaceAll(s,a.translated_step_type)).replaceAll(o,null==a.name?"":a.name)).replaceAll("StepDelayValue",null==p.Delay?"":p.Delay),l=this.setDynamicDataToEditBotResponse(l,a,!1)}else if("EditBotResponseRandomTextItemTemplate"==e.id){n="ChatbotStep_Id";l=(l=(l=l.replaceAll(n,a.stepId)).replaceAll("RandomtextIndex",a.index)).replaceAll("RandomtextNumber",a.index+1)}else if("EditUserInputTemplate"==e.id){p=a.action,n="ChatbotStep_Id",s="ChatbotStep_TranslatedTypeName",o="StepTitleValue";l=(l=(l=l.replaceAll(n,a.id)).replaceAll(s,a.translated_step_type)).replaceAll(o,null==a.name?"":a.name),l=this.setDynamicDataToEditUserInput(l,a,!1)}else if("EditFilterTemplate"==e.id){p=a.action,n="ChatbotStep_Id",s="ChatbotStep_TranslatedTypeName",o="StepTitleValue";l=(l=(l=l.replaceAll(n,a.id)).replaceAll(s,a.translated_step_type)).replaceAll(o,null==a.name?"":a.name),l=this.setDynamicDataToEditFilter(l,a,!1)}else if("EditBotActionTemplate"==e.id){p=a.action,n="ChatbotStep_Id",s="ChatbotStep_TranslatedTypeName",o="StepTitleValue";l=(l=(l=l.replaceAll(n,a.id)).replaceAll(s,a.translated_step_type)).replaceAll(o,null==a.name?"":a.name),l=this.setDynamicDataToEditBotAction(l,a,!1)}return l}setDynamicDataToEditBotResponse(e,t,a){var l=t.id,i=t.action,n=i.Type,s=i.Data,o={stepResponseTextValueKey:"StepResponseTextValue",stepResponseImage_FileName:"StepResponseImage_FileName",stepResponseButton_TitleValue:"StepResponseButton_TitleValue",stepResponseButton_TargetStepValue:"StepResponseButton_TargetStepValue",stepResponseButton_TargetUrlValue:"StepResponseButton_TargetUrlValue"};if("Text"!=n||a){if("RandomText"==n&&a){var p=s.Texts;p.forEach((e=>{this.botRandomTextNewText(l),document.getElementById("RandomTextStepTextarea_"+l).value=e,this.botRandomTextInputChanged(l)})),p.length>0&&this.botRandomTextBtnClicked(l,0)}else if("Image"==n){var r=s.FileName;a?this.displayView("StepResponseImage_DisplayImage_"+l,null!=r):e=e.replaceAll(o.stepResponseImage_FileName,this.replaceNull(r))}else if("Button"==n)if(a){var d=s.Type,u=document.getElementById("StepResponseButton_Type_"+l);null!=d&&(u.value=d),this.toggleBotResponseButtonForm(u,l)}else e=(e=(e=e.replaceAll(o.stepResponseButton_TitleValue,this.replaceNull(s.Title))).replaceAll(o.stepResponseButton_TargetStepValue,this.replaceNull(s.TargetStep))).replaceAll(o.stepResponseButton_TargetUrlValue,this.replaceNull(s.TargetUrl))}else e=e.replaceAll(o.stepResponseTextValueKey,this.replaceNull(s.TextValue));return Object.entries(o).forEach((t=>{const[a,l]=t;e=e.replaceAll(l,"")})),e}setDynamicDataToEditUserInput(e,t,a){t.id;var l=t.action,i=l.Type,n=l.Data,s={stepUserInputNumberTitleValueKey:"StepUserInputNumberTitleValue",stepUserInputNumberDescriptionValueKey:"StepUserInputNumberDescriptionValue",stepUserInputNumberPlaceholderValueKey:"StepUserInputNumberPlaceholderValue",stepUserInputNumberRequiredCheckedKey:"step_user_input_number_required_checked",stepUserInputNumberMinValueKey:"StepUserInputNumberMinValue",stepUserInputNumberMaxValueKey:"StepUserInputNumberMaxValue",stepUserInputOneLineTextTitleValueKey:"StepUserInputOneLineTextTitleValue",stepUserInputOneLineTextDescriptionValueKey:"StepUserInputOneLineTextDescriptionValue",stepUserInputOneLineTextPlaceholderValueKey:"StepUserInputOneLineTextPlaceholderValue",stepUserInputOneLineTextRequiredCheckedKey:"step_user_input_olt_required_checked",stepUserInputOneLineTextMinValueKey:"StepUserInputOneLineTextMinValue",stepUserInputOneLineTextMaxValueKey:"StepUserInputOneLineTextMaxValue",stepUserInputMultipleLineTextTitleValueKey:"StepUserInputMultipleLineTextTitleValue",stepUserInputMultipleLineTextDescriptionValueKey:"StepUserInputMultipleLineTextDescriptionValue",stepUserInputMultipleLineTextPlaceholderValueKey:"StepUserInputMultipleLineTextPlaceholderValue",stepUserInputMultipleLineTextRequiredCheckedKey:"step_user_input_mlt_required_checked",stepUserInputMultipleLineTextMinValueKey:"StepUserInputMultipleLineTextMinValue",stepUserInputMultipleLineTextMaxValueKey:"StepUserInputMultipleLineTextMaxValue",stepUserInputImageTitleValueKey:"StepUserInputImageTitleValue",stepUserInputImageDescriptionValueKey:"StepUserInputImageDescriptionValue",stepUserInputImageRequiredCheckedKey:"step_user_input_img_required_checked"};return"Number"!=i||a?"OneLineText"!=i||a?"MultipleLineText"!=i||a?"Image"!=i||a||(e=(e=(e=e.replaceAll(s.stepUserInputImageTitleValueKey,this.replaceNull(n.Title_Img))).replaceAll(s.stepUserInputImageDescriptionValueKey,this.replaceNull(n.Description_Img))).replaceAll(s.stepUserInputImageRequiredCheckedKey,this.booleanValue(n.Required_Img)?"checked":"")):e=(e=(e=(e=(e=(e=e.replaceAll(s.stepUserInputMultipleLineTextTitleValueKey,this.replaceNull(n.Title_MLT))).replaceAll(s.stepUserInputMultipleLineTextDescriptionValueKey,this.replaceNull(n.Description_MLT))).replaceAll(s.stepUserInputMultipleLineTextPlaceholderValueKey,this.replaceNull(n.Placeholder_MLT))).replaceAll(s.stepUserInputMultipleLineTextRequiredCheckedKey,this.booleanValue(n.Required_MLT)?"checked":"")).replaceAll(s.stepUserInputMultipleLineTextMinValueKey,this.replaceNull(n.MinLenght_MLT))).replaceAll(s.stepUserInputMultipleLineTextMaxValueKey,this.replaceNull(n.MaxLenght_MLT)):e=(e=(e=(e=(e=(e=e.replaceAll(s.stepUserInputOneLineTextTitleValueKey,this.replaceNull(n.Title_OLT))).replaceAll(s.stepUserInputOneLineTextDescriptionValueKey,this.replaceNull(n.Description_OLT))).replaceAll(s.stepUserInputOneLineTextPlaceholderValueKey,this.replaceNull(n.Placeholder_OLT))).replaceAll(s.stepUserInputOneLineTextRequiredCheckedKey,this.booleanValue(n.Required_OLT)?"checked":"")).replaceAll(s.stepUserInputOneLineTextMinValueKey,this.replaceNull(n.MinLenght_OLT))).replaceAll(s.stepUserInputOneLineTextMaxValueKey,this.replaceNull(n.MaxLenght_OLT)):e=(e=(e=(e=(e=(e=e.replaceAll(s.stepUserInputNumberTitleValueKey,this.replaceNull(n.Title_Num))).replaceAll(s.stepUserInputNumberDescriptionValueKey,this.replaceNull(n.Description_Num))).replaceAll(s.stepUserInputNumberPlaceholderValueKey,this.replaceNull(n.Placeholder_Num))).replaceAll(s.stepUserInputNumberRequiredCheckedKey,this.booleanValue(n.Required_Num)?"checked":"")).replaceAll(s.stepUserInputNumberMinValueKey,this.replaceNull(n.Min_Num))).replaceAll(s.stepUserInputNumberMaxValueKey,this.replaceNull(n.Max_Num)),Object.entries(s).forEach((t=>{const[a,l]=t;e=e.replaceAll(l,"")})),e}setDynamicDataToEditFilter(e,t,a){var l=t.id,i=t.action,n=i.Type,s=i.Data;"ClientCategory"==n&&a&&s.AllowedCategories.forEach((e=>{var t=document.getElementById("FilterClientCategory_"+l+"_Checkbox_"+e);t.checked=!0,t.setAttribute("checked",!0)}));return Object.entries({}).forEach((t=>{const[a,l]=t;e=e.replaceAll(l,"")})),e}setDynamicDataToEditBotAction(e,t,a){var l=t.id,i=t.action,n=i.Type,s=i.Data,o={botActionGoToStep_TargetStepValueKey:"BotActionGoToStep_TargetStepValue",botActionStartTicket_TicketSubjectValueKey:"BotActionStartTicket_TicketSubjectValue",botActionStartTicket_HourLimitValueKey:"BotActionStartTicket_HourLimitValue",botActionStartTicket_NumberLimitValueKey:"BotActionStartTicket_NumberLimitValue",botActionStartTicket_ScheduleFaildTargetStepValue:"BotActionStartTicket_ScheduleFaildTargetStepValue"};return"GoToStep"!=n||a?"StartTicket"!=n||a?"MakeTicket"==n&&a&&this.toggleBotActionPriority(l,s.TicketPriority):e=(e=(e=(e=e.replaceAll(o.botActionStartTicket_TicketSubjectValueKey,this.replaceNull(s.TicketSubject))).replaceAll(o.botActionStartTicket_HourLimitValueKey,this.replaceNull(s.HourLimit))).replaceAll(o.botActionStartTicket_NumberLimitValueKey,this.replaceNull(s.NumberLimit))).replaceAll(o.botActionStartTicket_ScheduleFaildTargetStepValue,this.replaceNull(s.ScheduleFaildTargetStep)):e=e.replaceAll(o.botActionGoToStep_TargetStepValueKey,this.replaceNull(s.TargetStep)),Object.entries(o).forEach((t=>{const[a,l]=t;e=e.replaceAll(l,"")})),e}replaceNull(e){return null==e?"":e}booleanValue(e){return"true"==(e=String(e).toLowerCase())||"1"==e}setDropdownSelectedItem(e,t){for(var a,l=document.getElementById(e),i=0;i<l.options.length;i++)if((a=l.options[i]).value==t)return void a.setAttribute("selected",!0)}displayView(e,t=!0){var a=document.getElementById(e);if(is_ElementExist(a)){var l="d-none",i=func_hasClass(a,l);t&&i?toggleElementClass(e,l):t||i||toggleElementClass(e,l)}}createChatbotDiagram(e=0,t=null,a=null){null==t&&(t=this.chatbotStepsTree),null==a&&(a=this.mainCanvas),0==e&&(this.clearCanvas(),this.addTemplateToView(a,this.verticalLineTemplate,null),this.addTemplateToView(a,this.addNewStepTemplate,"AddNewStep_"+e,{parentId:e})),1==t.length?this.addTemplateToView(a,this.verticalLineTemplate,null):t.length>1&&(this.addTemplateToView(a,this.verticalLineTemplate,null),this.addTemplateToView(a,this.horizontalContainerTemplate,"horizontalContainer_par_"+e),a=document.getElementById("horizontalContainer_par_"+e+"_canvas")),t.forEach(((e,t,l)=>{var i=0===t,n=t===l.length-1,s="container_"+e.id,o='<div id="'+s+(n?'"></div>':'" class="pe-2"></div>');a.innerHTML+=o;var p=document.getElementById(s);l.length>1&&(this.addTemplateToView(p,this.horizantalLineTemplate,null,{isFirstStep:i,isLastStep:n}),this.addTemplateToView(p,this.verticalLineTemplate,null)),this.addTemplateToView(p,this.botStepTemplate,"viewStep_"+e.id,e);var r=document.getElementById("moveStepContainer_"+e.id);this.addTemplateToView(r,this.moveBotResponseTemplate,"moveStepSection_"+e.id,e);var d=document.getElementById("editStepContainer_"+e.id);if(this.addTemplateToView(d,this.getStepEditTemplate(e.type),"editStepSection_"+e.id,e),"BotAction"==e.type&&e.action.Data.IsFinalStep||(this.addTemplateToView(p,this.verticalLineTemplate,null),this.addTemplateToView(p,this.addNewStepTemplate,"AddNewStep_"+e.id,{parentId:e.id})),e.childs.length>0){var u="stepChilds_"+e.id,c='<div id="'+u+'"></div>';p.innerHTML+=c;var m=document.getElementById(u);this.createChatbotDiagram(e.id,e.childs,m)}}))}getStepEditTemplate(e){return"BotResponse"==e?this.editBotResponseTemplate:"UserInput"==e?this.editUserInputTemplate:"Filter"==e?this.editFilterTemplate:"BotAction"==e?this.editBotActionTemplate:(alert('Error: Edit template for step type "'+e+'" not defined.'),"")}deleteStep(e,t,a=!1){var l=this.modalConfirm,i=document.getElementById("ChatbotConfirm_DeleteStep").value;i=i.replace("ChatbotDeleteConfirm_StepTitle",'"'+t+'"'),l.setHeader(trans("alert.Delete")),l.setBody(i),l.create(),l.setOnYesPressed(function(){var t=this.getServerConnection("delete_step");t.appendData("stepId",e),t.appendData("deleteChilds",a),t.setOnSuccess(function(e){var t=(e=JSON.parse(e)).data;this.setChatbotStepsTree(t.chatbotStepsTree),this.createChatbotDiagram(),this.modalLoading.close()}.bind(this)),t.connect()}.bind(this))}moveStepDialog(e){this.displayView(this.openDialogFormId,!1);var t="moveStepContainer_"+e;this.displayView(t,!0),this.openDialogFormId=t}moveStep(e){var t=document.getElementById("StepMoveForm_"+e),a=this.getServerConnection("move_step");a.appendData("stepId",e);for(var l=0;l<t.elements.length;l++){var i=t.elements[l];a.appendData(i.name,i.value)}a.setOnSuccess(function(e){var t=(e=JSON.parse(e)).data;this.setChatbotStepsTree(t.chatbotStepsTree),this.createChatbotDiagram(),this.modalLoading.close(),this.displayView(this.openDialogFormId,!0)}.bind(this)),a.connect()}editStep(e){this.displayView(this.openDialogFormId,!1);var t="editStepContainer_"+e;this.displayView(t,!0),this.openDialogFormId=t}updateStep(e){var t=document.getElementById("StepForm_"+e),a=this.getServerConnection("update_step");a.appendData("stepId",e);for(var l=0;l<t.elements.length;l++){var i=t.elements[l];"file"==i.type?null!=i.value&&""!=i.value&&a.appendData(i.name,i.files[0]):"checkbox"==i.type?a.appendData(i.name,i.checked):a.appendData(i.name,i.value)}a.setOnSuccess(function(e){var t=(e=JSON.parse(e)).data;this.setChatbotStepsTree(t.chatbotStepsTree),this.createChatbotDiagram(),this.modalLoading.close(),this.displayView(this.openDialogFormId,!0)}.bind(this)),a.connect()}toggleBotStepTypeForm(e,t,a){for(var l,i=e.value,n=0;n<e.options.length;n++){var s=a+(l=e.options[n]).value+"_"+t;this.displayView(s,l.value==i)}}toggleBotResponseForm(e,t){this.toggleBotStepTypeForm(e,t,"ResponseTypeForm_");var a=document.getElementById("StepResponseButton_Type_"+t);this.toggleBotResponseButtonForm(a,t)}toggleBotUserInputForm(e,t){this.toggleBotStepTypeForm(e,t,"UserInputTypeForm_")}toggleBotFilterForm(e,t){this.toggleBotStepTypeForm(e,t,"FilterTypeForm_")}toggleBotActionForm(e,t){this.toggleBotStepTypeForm(e,t,"BotActionTypeForm_")}botRandomTextNewText(e){var t=document.getElementById("RandomTextCounterContainer_"+e),a=t.querySelectorAll('*[name*="RandomTextItemSection"]').length,l=this.getRandomTextDivId(e,a);this.addTemplateToView(t,this.editBotResponseRandomTextItemTemplate,l,{stepId:e,index:a}),this.botRandomTextBtnClicked(e,a)}getRandomTextDivId(e,t){return"RandomText_step_"+e+"_index_"+t}botRandomTextBtnClicked(e,t){this.getRandomTextDivId(e,t);var a=document.getElementById("RandomTextCounterContainer_"+e),l=document.getElementById("RandomTextInputSection_"+e),i=document.getElementById("RandomTextStepTextarea_"+e),n=document.getElementById("RandomTextBtnDelItem_"+e),s=document.getElementById("RandomTextItemTextarea_"+e+"_"+t);this.displayView(l.id,!0),n.dataset.targetId=this.getRandomTextDivId(e,t),i.dataset.targetId=s.id,i.value=s.innerHTML,i.innerHTML=s.innerHTML;var o="RandomTextItemBtn_"+e+"_"+t,p=a.querySelectorAll('*[name*="RandomTextItemBtn"]'),r="btn-success",d="btn-primary";p.forEach((e=>{e.id==o?(func_hasClass(e,d)&&toggleElementClass(e.id,d),func_hasClass(e,r)||toggleElementClass(e.id,r)):(func_hasClass(e,r)&&toggleElementClass(e.id,r),func_hasClass(e,d)||toggleElementClass(e.id,d))}))}botRandomTextInputChanged(e){var t=document.getElementById("RandomTextStepTextarea_"+e),a=t.dataset.targetId;document.getElementById(a).innerHTML=t.value}deleteRandomText(e,t){var a=t.dataset.targetId,l=document.getElementById(a);l.parentNode.removeChild(l);var i=document.getElementById("RandomTextCounterContainer_"+e),n=document.getElementById("RandomTextInputSection_"+e),s=i.querySelectorAll('*[name*="RandomTextItemBtn"]');s.forEach(((e,t,a)=>{e.innerHTML=t+1})),s.length>0?s[0].click():this.displayView(n.id,!1)}botResponseImageUploadBtnClicked(e){document.getElementById("ResponseImageFormImageUpload_"+e).click()}botResponseImageNewFileSelected(e){var t=document.getElementById("ResponseImageFormImageUpload_"+e),a=document.getElementById("ResponseImageFormImageUploadName_"+e),l=t.value;try{a.value=l.split("\\").pop()}catch(e){a.value=l}}toggleBotResponseButtonForm(e,t){for(var a,l=e.value,i=0;i<e.options.length;i++){var n=(a=e.options[i]).value==l;n?a.setAttribute("selected",!0):a.removeAttribute("selected");var s="StepResponseButton_TypeSection_"+a.value+"_"+t;this.displayView(s,n)}}toggleBotActionPriority(e,t){if(null!=e){null==t&&(t="Normal");for(var a,l=document.getElementById("BotActionMakeTicket_Priority_"+e),i=0;i<l.options.length;i++){(a=l.options[i]).value==t?a.setAttribute("selected",!0):a.removeAttribute("selected")}l.value=t,l.setAttribute("value",t)}}}
